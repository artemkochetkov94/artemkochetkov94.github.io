"use strict";var m10=1023,m7=767;Element.prototype.closest||(Element.prototype.closest=function(e){for(var t=this;t;){if(t.matches(e))return t;t=t.parentElement}return null}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector),document.addEventListener("DOMContentLoaded",function(e){var t,o,n,l,a,s,i,r,c,u,d,p,m;switch(t=document.querySelectorAll(".js-label-fly"),Array.prototype.forEach.call(t,function(e){var t=e.querySelector(".input");""!==t.value&&e.classList.add("active"),t.addEventListener("change",function(e,t){""!==e.value?t.classList.contains("active")||t.classList.add("active"):t.classList.contains("active")&&t.classList.remove("active")}.bind(null,t,e))}),o=document.querySelectorAll(".js-popup"),Array.prototype.forEach.call(o,function(e){var t=document.querySelector(e.dataset.popupSelector),o=t.querySelector(".js-popup-all__title"),n=t.querySelector(".js-popup-all__subtitle"),l=e.getAttribute("data-title"),a=e.getAttribute("data-subtitle");e.addEventListener("click",function(){t.classList.contains("popup-kasko")&&($(".popup-kasko__content-part").removeClass("show"),$('.popup-kasko__content-part[data-step="1"]').addClass("show"),t.setAttribute("data-stage",1)),null!==o&&(o.textContent=l),null!==n&&(n.textContent=a),$.magnificPopup.open({items:{src:t},type:"inline",fixedContentPos:!0,closeMarkup:'<button class="popup-close mfp-close" type="button" title="%title%">\t<svg class="icon-svg icon-close" width="100%" height="100%">\t\t<use xlink:href="img/static/icons.svg#icon-close"></use>\t</svg></button>',tClose:"Закрыть"},0)})}),function(){var e=document.querySelectorAll(".js-popup-all-btn");if(!(e.length<1)){var t=document.querySelector(".popup-all"),o=t.querySelector(".js-popup-all__title"),n=t.querySelector(".js-popup-all__subtitle"),l={popup:t,title:o,subtitle:n};Array.prototype.forEach.call(e,function(e){e.addEventListener("click",function(e,t,o){o.preventDefault();var n=e.getAttribute("data-title");if(null!==t.subtitle){var l=e.getAttribute("data-subtitle");t.subtitle.textContent=l}t.title.textContent=n,$.magnificPopup.open({items:{src:t.popup},type:"inline",fixedContentPos:!0,closeMarkup:'<button class="popup-close mfp-close" type="button" title="%title%">\t<svg class="icon-svg icon-close" width="100%" height="100%">\t\t<use xlink:href="img/static/icons.svg#icon-close"></use>\t</svg></button>',tClose:"Закрыть",callbacks:{open:function(){var e=document.getElementById("name");console.log(e),null!==e&&setTimeout(function(){e.focus()},100)}}},0)}.bind(null,e,l))})}}(),function(){var e=document.querySelector(".popup-basket");if(null==e)return;var t=e.querySelector(".js-popup-basket-close"),o=e.querySelectorAll(".js-popup-basket-decor"),n=document.querySelector(".popup-order");t.addEventListener("click",function(){$.magnificPopup.close()}),Array.prototype.forEach.call(o,function(e){e.addEventListener("click",function(e){e.preventDefault(),$.magnificPopup.close(),setTimeout(function(){$.magnificPopup.open({items:{src:n},type:"inline",fixedContentPos:!0,closeMarkup:'<button class="popup-close mfp-close" type="button" title="%title%">\t<svg class="icon-svg icon-close" width="100%" height="100%">\t\t<use xlink:href="img/static/icons.svg#icon-close"></use>\t</svg></button>',tClose:"Закрыть"})},100)})})}(),n=document.querySelectorAll(".js-btn-toggler"),Array.prototype.forEach.call(n,function(e){var t=null,o=null,n=null,l=0;null!=e.getAttribute("data-overflow-animation")&&(n=!0),null!=e.getAttribute("data-parent")&&(t=e.getAttribute("data-parent"),o=e.closest(t)),null!=e.getAttribute("data-target")&&(t=e.getAttribute("data-target"),o=document.querySelector(t)),e.addEventListener("click",function(){if(e.classList.toggle("btn-toggle-active"),n){if(l)return;o.classList.contains("toggle-active")?(o.classList.remove("toggle-active"),o.classList.remove("toggle-active-overflow-visible")):(o.classList.add("toggle-active"),setTimeout(function(){o.classList.add("toggle-active-overflow-visible")},500)),l=1,setTimeout(function(){l=0},500)}else o.classList.toggle("toggle-active")})}),y(),l=document.querySelectorAll(".range-slider-outer"),Array.prototype.forEach.call(l,function(e){var t=e.querySelector(".range-slider"),o=e.querySelector(".range"),n=parseInt(t.getAttribute("data-min")),l=parseInt(t.getAttribute("data-max")),a=t.getAttribute("data-postfix");$(o).ionRangeSlider({type:"single",min:n,max:l,from:n,to:2e6,step:1,postfix:a,onChange:function(e){c.value=e.from}});var s=o.getAttribute("id"),i=$("#"+s),r=i.data("ionRangeSlider"),c=e.querySelector(".input-slider input");c.value=n,c.onkeydown=function(){r.update({from:c.value})},c.onkeyup=function(){r.update({from:c.value})}}),a=document.querySelectorAll(".js-block-choice-wrapper"),Array.prototype.forEach.call(a,function(e){var t=e.querySelector(".js-block-choice-handler"),o=e.querySelector(".block-choice__checkbox"),n=e.querySelectorAll(".js-block-choice-btn");t.addEventListener("click",function(e,t){"enabled"==(!0===e.checked?"enabled":"disabled")?Array.prototype.forEach.call(t,function(e){e.setAttribute("disabled",!0)}):Array.prototype.forEach.call(t,function(e){e.removeAttribute("disabled")})}.bind(null,o,n))}),s=document.querySelectorAll(".quantity-counter"),Array.prototype.forEach.call(s,function(e){var t=e.querySelector(".quantity-counter__input"),o=e.querySelectorAll(".js-quantity-counter__control");Array.prototype.forEach.call(o,function(e){e.addEventListener("click",function(e,t){var o,n,l=e.getAttribute("data-change");switch(l){case"minus":!function(e){var t=e.value;if(1<+t)e.value=+t-1}(t);break;case"plus":n=(o=t).value,o.value=+n+1}}.bind(null,e,t))}),t.addEventListener("keyup",function(e){e.value=e.value.replace(/[^\d]/g,"")}.bind(null,t))}),i=document.querySelectorAll(".basket-item"),Array.prototype.forEach.call(i,function(e){var t=e.querySelector(".basket-item__remove");t.addEventListener("click",function(e){e.parentNode.removeChild(e)}.bind(null,e))}),null!==(r=document.querySelector(".js-offers-carousel"))&&3<r.querySelectorAll(".offers__item").length&&$(r).owlCarousel({items:2,nav:!0,margin:15,navContainer:".my-owl-nav2",responsive:{0:{margin:15},480:{margin:20},768:{items:3,margin:25},1024:{items:3,margin:32}}}),null!==(c=document.querySelector(".js-card-accessories-gallery"))&&$(c).owlCarousel({items:1,nav:!1,dots:!0,dotsClass:"my-owl-dots my-owl-dots--grey",navContainerClass:"my-owl-nav"}),null!==(u=document.querySelector(".js-accessories-carousel"))&&$(u).owlCarousel({items:2,nav:!0,margin:15,responsive:{768:{items:3,margin:20},1024:{items:4,margin:25}}}),null!==(d=document.querySelector(".js-gadgets-mini-carousel"))&&$(d).owlCarousel({items:2,nav:!1,dots:!0,dotsClass:"my-owl-dots my-owl-dots--grey",responsive:{0:{items:2,margin:10},480:{items:3,margin:10},768:{items:3,margin:20},1024:{items:4,margin:20}}}),function(){var e=document.querySelectorAll(".popup-kasko__content-part"),t=document.querySelectorAll(".js-popup-kasko-next"),o=[],n=document.querySelector(".popup-kasko");function l(e){!function(){for(var e=0;e<o.length;e++)if(o[e].element.classList.contains("show")){o[e].element.classList.remove("show");break}}();for(var t=0;t<o.length;t++)if(o[t].step==e){o[t].element.classList.add("show");break}2==e&&function(){var o=[],e=document.querySelector('.popup-kasko__column[kasko-field="1"] select'),t=document.querySelector('.popup-kasko__column[kasko-field="2"] select'),n=document.querySelector('.popup-kasko__column[kasko-field="3"] select'),l=document.querySelector('.popup-kasko__column[kasko-field="6"] select'),a=document.querySelector('.popup-kasko__column[kasko-field="7"] select'),s=document.querySelector('.popup-kasko__column[kasko-field="8"] select'),i=document.querySelector('.popup-kasko__column[kasko-field="9"] select');e=e.options[e.options.selectedIndex].value,t=t.options[t.options.selectedIndex].value,n=n.options[n.options.selectedIndex].value,l=l.options[l.options.selectedIndex].value,a=a.options[a.options.selectedIndex].value,s=s.options[s.options.selectedIndex].value,i=i.options[i.options.selectedIndex].value;var r=document.querySelector('.popup-kasko__column[kasko-field="4"] input').value,c=document.querySelector('.popup-kasko__column[kasko-field="5"] input').value;o.push({id:0,value:"default"},{id:1,value:e},{id:2,value:t},{id:3,value:n},{id:4,value:r},{id:5,value:c},{id:6,value:l},{id:7,value:a},{id:8,value:s},{id:9,value:i});var u=document.querySelectorAll(".kasko__list-item span[kasko-field]");Array.prototype.forEach.call(u,function(e){var t=e.getAttribute("kasko-field");e.textContent=o[t].value})}(),n.setAttribute("data-stage",e)}Array.prototype.forEach.call(e,function(e){o.push({element:e,step:e.getAttribute("data-step")})}),Array.prototype.forEach.call(t,function(e){var t=e.getAttribute("data-step-next");e.addEventListener("click",l.bind(null,t))})}(),$("body").attr("data-route")){case"homepage":f();break;case"car":!function(){var e=$(".car-gallery"),o=e.find(".js-car-gallery-for"),l=e.find(".js-car-gallery-nav"),a=l.find(".js-car-gallery-nav-item");o.owlCarousel({margin:0,nav:!1,dots:!1,items:1,lazyLoad:!0,navText:[,]}),4<a.length&&l.owlCarousel({margin:5,nav:!0,dots:!0,dotsClass:"my-owl-dots my-owl-dots--grey",items:3,lazyLoad:!0,mouseDrag:!1,responsive:{0:{margin:5},480:{items:5}}});a.on("click",function(e){var t;t=$(this).parent().hasClass("owl-item")?$(this).parent().index():$(this).index(),o.trigger("to.owl.carousel",t),a.removeClass("is-active"),$(this).addClass("is-active")}),o.on("changed.owl.carousel",function(e){if(a.removeClass("is-active"),a.eq(e.item.index).addClass("is-active"),l.hasClass("owl-carousel")){var t,o,n=[];l.find(".active > .product-gallery__thumb").each(function(){n.push($(this).parent().index())}),t=n[0],o=n[5],e.item.index>o&&a.trigger("next.owl.carousel"),e.item.index<t&&a.trigger("prev.owl.carousel")}})}(),function(){var t=document.querySelector(".car-side"),o=document.querySelector(".car-content"),e=t.querySelector(".side-t1"),n=o.querySelector(".car-gallery"),l=0;function a(e){window.matchMedia("(max-width: "+m7+"px)").matches?0==l&&(o.insertBefore(e,n.nextSibling),l=1):1==l&&(t.insertBefore(e,t.children[0]),l=0)}window.matchMedia("(max-width: "+m7+"px)").matches&&a(e);window.addEventListener("resize",a.bind(null,e))}();break;case"category":f(),$(".hover-gallery__thumbs").each(function(){var e=$(this);e.siblings(".hover-gallery__images").find("img").each(function(){e.append("<i>")})}),$(".hover-gallery__thumbs i").hover(function(){if(!window.matchMedia("(max-width: 600px)").matches){var e=$(this).parent(".hover-gallery__thumbs").siblings(".hover-gallery__images").find("img"),t=$(this).parent().find("i");$(this).parents(".hover-gallery").css("opacity",1),e.css("opacity",0).eq($(this).index()).css("opacity",1),t.removeClass("is-active"),$(this).addClass("is-active")}}).parents(".hover-gallery").mouseleave(function(){window.matchMedia("(max-width: 600px)").matches||$(this).css("opacity",0)}),function(){var e=document.getElementById("js-car-filter"),t=e.querySelector(".js-filter-reset");e.querySelectorAll(".js-select");t.addEventListener("click",function(){e.reset(),$(".js-select").selectric("refresh")});var o=document.querySelector(".car-filter");document.querySelector(".js-car-filter-open-all").addEventListener("click",function(){o.classList.add("active")})}();break;case"special-offers":!function(){function e(e){var t=new XMLHttpRequest;t.open("GET","data/offers.json",!1),t.send();var o=null;200==t.status&&(o=function(e){for(var t=document.createDocumentFragment(),o=0;o<e.length;o++){var n=document.createElement("div");n.classList.add("offers__item"),n.innerHTML='<a href="'+e[o].link+'" class="offers__item-img">  <img src="'+e[o].img+'" alt="#"></a><div class="offers__item-description">  <a href="'+e[o].link+'" class="offers__item-title title-20"><b>'+e[o].title+'</b></a>  <div class="offers__item-time">'+e[o].description+"</div></div>",t.appendChild(n)}return t}(JSON.parse(t.responseText)),e.appendChild(o))}return t=document.querySelector(".js-offers-more"),o=document.querySelector(".offers"),t.addEventListener("click",e.bind(null,o));var t,o}();break;case"car-sale":p=document.querySelector(".js-car-sale-form-name"),m=document.querySelectorAll(".js-car-sale-item"),Array.prototype.forEach.call(m,function(e){var t=e.dataset.nameForm,o=e.querySelector(".car-sale-list__item-input");o.checked&&(p.textContent=t),o.onchange=function(){o.checked&&(p.textContent=t)}});break;case"kasko":case"credit":g()}function f(){var e=document.querySelector(".js-hero-carousel");null!==e&&1<e.querySelectorAll(".slide").length&&$(e).owlCarousel({items:1,dots:!0,dotsClass:"my-owl-dots",nav:!0,navContainerClass:"my-owl-nav"})}function v(e){for(var t=e.closest(".selectric-wrapper").querySelector(".label"),o=t.textContent.split("; "),n=0;n<o.length;n++)o[n]='<span class="select-color"></span>'+o[n];t.innerHTML=o.join("; ");var l=function(e){for(var t,o=[],n=e&&e.options,l=0,a=n.length;l<a;l++)(t=n[l]).selected&&o.push(t.getAttribute("data-color"));return o}(e),a=t.querySelectorAll(".select-color");Array.prototype.forEach.call(a,function(e,t){e.style.backgroundColor=l[t]})}function y(){var e=document.querySelector(".map");if(null!=e){var t=JSON.parse(e.getAttribute("data-geo")),o=t[0].lat,n=t[0].lng;ymaps.ready(function(){y=new ymaps.Map("map",{center:[o,n],zoom:13});var e=new ymaps.Placemark([o,n],{},{iconLayout:"default#image",iconImageHref:"..img/static/icons/icon-map.svg",iconImageSize:[56,65],iconImageOffset:[-25,-65]});y.geoObjects.add(e),y.behaviors.disable("scrollZoom")})}}function g(){var e=document.querySelectorAll(".js-filling-step"),t=document.querySelectorAll(".js-filling-next"),n=[],l=document.querySelector(".filling-outer"),a=l.classList.contains("js-p-kasko");function s(){for(var e=0;e<n.length;e++)if(n[e].element.classList.contains("show"))return n[e].step}function o(e){var t=s();!function(){for(var e=0;e<n.length;e++)if(n[e].element.classList.contains("show")){n[e].element.classList.remove("show");break}}();for(var o=0;o<n.length;o++)if(n[o].step==e){n[o].element.classList.add("show");break}t<s()&&a&&function(){var o=[],e=document.querySelector('.p-kasko__column[kasko-field="1"] select'),t=document.querySelector('.p-kasko__column[kasko-field="2"] select'),n=document.querySelector('.p-kasko__column[kasko-field="3"] select'),l=document.querySelector('.p-kasko__column[kasko-field="6"] select'),a=document.querySelector('.p-kasko__column[kasko-field="7"] select'),s=document.querySelector('.p-kasko__column[kasko-field="8"] select'),i=document.querySelector('.p-kasko__column[kasko-field="9"] select');e=e.options[e.options.selectedIndex].value,t=t.options[t.options.selectedIndex].value,n=n.options[n.options.selectedIndex].value,l=l.options[l.options.selectedIndex].value,a=a.options[a.options.selectedIndex].value,s=s.options[s.options.selectedIndex].value,i=i.options[i.options.selectedIndex].value;var r=document.querySelector('.p-kasko__column[kasko-field="4"] input').value,c=document.querySelector('.p-kasko__column[kasko-field="5"] input').value;o.push({id:0,value:"default"},{id:1,value:e},{id:2,value:t},{id:3,value:n},{id:4,value:r},{id:5,value:c},{id:6,value:l},{id:7,value:a},{id:8,value:s},{id:9,value:i});var u=document.querySelectorAll(".p-kasko__note span[kasko-field]");Array.prototype.forEach.call(u,function(e){var t=e.getAttribute("kasko-field");e.textContent=o[t].value})}(),l.setAttribute("data-stage",e)}Array.prototype.forEach.call(e,function(e){n.push({element:e,step:e.getAttribute("data-step")})}),Array.prototype.forEach.call(t,function(e){var t=e.getAttribute("data-step-next");e.addEventListener("click",o.bind(null,t))})}window.animateDelay={delay:function(e,o,n,t){return Array.apply(null,e).forEach(function(e,t){e.style.transitionDelay=o+t*n+"s"}),Array.from(e).length*n+o+t},reverseDelay:function(e,o,n){Array.apply(null,e).forEach(function(e,t){e.style.transitionDelay=o-t*n+"s"})}},window.swimming={toSwim:function(e){e.classList.contains("out")||e.classList.add("out")},dontSwim:function(e){e.classList.contains("out")&&e.classList.remove("out")}},function(){var t,o,n,l,a,e,s=document.querySelector(".p-wrapper"),i=s.querySelector(".p-header"),r=i.querySelector(".header-content__nav"),c=i.querySelectorAll(".header-content__nav > ul > li"),u=s.querySelector(".p-header__main"),d=s.querySelector(".p-header-mobile__part"+r.getAttribute("mobile-part")),p=i.querySelector(".js-burger");function m(e){p.classList.remove("is-active"),i.classList.remove("is-active"),document.body.classList.remove("overflow-hidden"),"function"==typeof e&&e()}function f(){window.animateDelay.delay(c,.3,.05,.35)}function v(){window.animateDelay.reverseDelay(c,.65,.05)}p.addEventListener("click",function(){var e;i.classList.contains("is-active")?m(v):(e=f,p.classList.add("is-active"),i.classList.add("is-active"),document.body.classList.add("overflow-hidden"),"function"==typeof e&&e())}),t=function(){window.matchMedia("(max-width: "+m10+"px)").matches?null==d.querySelector(".header-content__nav")&&d.appendChild(r):(null==u.querySelector(".header-content__nav")&&u.appendChild(r),i.classList.contains("is-active")&&m(),window.swimming.dontSwim(i))},a=!(o=100),e=function e(){if(a)return n=arguments,void(l=this);t.apply(this,arguments),a=!0,setTimeout(function(){a=!1,n&&(e.apply(l,n),n=l=null)},o)},window.matchMedia("(max-width: "+m10+"px)").matches&&d.appendChild(r),window.addEventListener("resize",function(){e()})}(),$(".js-select").length&&$(".js-select").each(function(){var e={multiple:{separator:"; ",keepMenuOpen:!0,maxLabelEntries:!1},onInit:function(e){null!==e.getAttribute("multiple")&&v(e)},onChange:function(e,t){if(e.classList.contains("js-select-cars")){var o=document.querySelector(".js-car-item.selected");o.classList.remove("selected"),(o=document.querySelector('.js-car-item[data-name="'+e.options[e.selectedIndex].value+'"]')).classList.add("selected")}null!==e.getAttribute("multiple")&&v(e)},onRefresh:function(e){null!==e.getAttribute("multiple")&&v(e)}};$(this).selectric(e)}),$(document).on("click",'a[href^="#"]',function(e){e.preventDefault(),$("html, body").animate({scrollTop:$($.attr(this,"href")).offset().top},500)})});